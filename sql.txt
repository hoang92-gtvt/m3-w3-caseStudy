create table phieumuon
(
    id int auto_increment primary key,
    identity    varchar(20) not null,
    user_id     int         not null,
    constraint identity
        unique (identity),
    constraint phieumuon_ibfk_1
        foreign key (user_id) references users (id),
);

create index statusPM_id
    on phieumuon (statusPM_id);

create index user_id
    on phieumuon (user_id);



create table detailpm
(
    id          int auto_increment primary key,
    PM_id int not null,
    book_id     int not null,
    date        date    null,
    duedate     date    null,
    statusPM_id int         not null,
    constraint PM_id
        unique (PM_id),
    constraint book_id
        unique (book_id),
    constraint detailpm_ibfk_1
        foreign key (PM_id) references phieumuon (id),
    constraint detailpm_ibfk_2
        foreign key (book_id) references book (id)
    constraint phieumuon_ibfk_2
        foreign key (statusPM_id) references statuspm (id)
);


create table statuspm
(
    id   int         not null
        primary key,
    name varchar(50) null
);